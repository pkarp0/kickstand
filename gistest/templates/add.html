{% extends "jqm/simple.html" %}


{% block pagetitle %}
Add
{% endblock %}

{% block content %}
  <div class="ui-content" role="main">
  	<h3>Current: {{address}}</h3>
	<div class="ui-field-contain">
  	<label for="select-choice-1" class="select">Select:</label>
  		<select name="select-choice-1" id="select-choice-1">
	  		{% for item in nearby %}
    		<option value="{{item.name}}">{{item.name}}: {{item.vicinity}}</option>
    		{% endfor %}
  		</select>
	</div>
  </div>
  <form action=".">
	<input id="id_name" maxlength="128" name="name" type="hidden"  />
	<input id="id_address" type="hidden" />
	<input id="id_coord" type="hidden" />  	
  </form>
  <input type="submit" value="Add">
{% endblock %}

{% block jqmscripts %}
$('#select-choice-1').change(function(){
    $('#id_name').val(  $('#select-choice-1').val() );
    lat = $('#select-choice-1 :selected').data('lat');
    lon = $('#select-choice-1 :selected').data('lon');
    $('#id_coord').val('POINT(' + lon + ' ' + lon + ')' );
    $('#id_address').val( $('#select-choice-1 :selected').data('vicinity'));
});
{% endblock %}
